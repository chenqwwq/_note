# 本地缓存组件

---

[TOC]

---



## Introduce

缓存是常见的优化形式

对于一些长时间不变动的数据可以添加本地缓存，







## 常见的缓存算法

各类缓存算法主要的区别都是在淘汰策略，不同的淘汰策略很大程度上决定了缓存的命中率。

一般都会根据缓存大小触发对应的淘汰策略。



### LRU（Least Recently Used，最近最少使用

LRU 就是根据访问的时间进行淘汰，最久没使用的对象才会被淘汰。

LRU 的缺点是可能被突发流量冲散，导致缓存命中率下降。

例如在 MySQL 中，如果对于底层的数据页缓存使用单纯的 LRU 缓存，一次全表扫描就会将缓存全部打乱，导致接下来的缓存命中率急速下降。



### LFU（Least Frequently Used，最近最低频率使用

LFU 就是根据访问的频率进行淘汰，就算是刚访问，但是因为频率低所以也可能被淘汰。

LFU 的缺点是无法有效应对周期性流量，例如一个秒杀场景下，商品的缓存会被大量点击，此时的频率远远高于平时正常点击的，但是秒杀之后商品信息基本无用。

另外相对于 LRU，LFU 需要记录更多的信息，对系统也是一种压力。



### FIFO（First In First Out，先入先出

相当于是根据插入的时间进行淘汰，也存在一定的使用场景。

例如公司对 JWT 的修改，超过一定时间的用户需要远程校验 Token，如果缓存数量超过阈值则直接触发淘汰，即使未过期，此时就应该 FIFO，LRU 会导致频繁访问的用户长期不校验。

