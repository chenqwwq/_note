# Explain 分析



> Explain 是 MySQL 中常规的 SQL 解析工具，能展示出SQL的部分执行逻辑和过程。
>
> 分析 Explain 的输出就能帮助我们优化和改进 SQL 语句。

---

[TOC]

---



## 示例

```mysql
mysql> explain select * from servers;
+----+-------------+---------+------+---------------+------+---------+------+------+-------+
| id | select_type | table   | type | possible_keys | key  | key_len | ref  | rows | Extra |
+----+-------------+---------+------+---------------+------+---------+------+------+-------+
|  1 | SIMPLE      | servers | ALL  | NULL          | NULL | NULL    | NULL |    1 | NULL  |
+----+-------------+---------+------+---------------+------+---------+------+------+-------+
1 row in set (0.03 sec)
```



explain 用于展示 SQL 语句的执行计划。

主要关注的几个字段如下：



## possible_keys

可能选择索引名称。

这里会将表结构中可以用到的所有索引列出，然后从中选择效率最高的执行（可能选择错误）。

<br>

如果 possible_keys 为空，表示没有任何索引可以使用，所以都会作全表扫描处理。



## key / key_len

最终选择的索引，以及索引的长度。

key_len 肯定是越小越好，类型上 int 的匹配优于字符串匹配。



## rows 

扫描行数。

每个查询语句可能扫描的记录行数，InnoDB 中该行数只是一个粗略值（经抽样统计得出）。



## extra

额外信息，表示的在行搜索之后的其他操作。

### using where

过滤元组， 不代表读取数据文件或索引文件

### using index

只需要读取索引文件就可以获取全部的数据，而不需要读取数据文件。

表示不需要进行回表。	

### using filesort

会经过**额外的排序**，该标志并不一定代表文件排序。